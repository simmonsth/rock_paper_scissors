<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Good Ol' Rock, Paper, Scissorz</title>
  </head>
  <body>
    <script type="text/javascript">
      html = document.querySelector('html');
      para = document.createElement('p');
      html.appendChild(para);
      para.textContent = "Sassy RPS Computer 2.0 (don't screw up)";
      document.body.style.backgroundColor = "honeydew";

      let playerScore   = 0;
      let computerScore = 0;
      let storedComputerChoice;

      function computerPlay() {
        const rpsArray = ["rock", "paper", "scissors"];
        return rpsArray[Math.floor(Math.random() * 3)];
      }

      function playRound(playerChoice, computerChoice) {
        playerChoice = playerChoice.toLowerCase();
        computerChoice = computerChoice.toLowerCase();
        storedComputerChoice = computerChoice;
        if (playerChoice == computerChoice) {
          return console.log(`Tie. Both chose ${playerChoice}.`);
        } else if (playerChoice === 'rock' && computerChoice === 'scissors') {
          playerScore++;
          return console.log(`You win this round. ${playerChoice}
            beats ${computerChoice}.`);
        } else if (playerChoice === 'rock' && computerChoice === 'paper') {
          computerScore++;
          return console.log(`You lose this round. ${computerChoice}
            beats your ${playerChoice}`);
        } else if (playerChoice === 'paper' && computerChoice === 'rock') {
          playerScore++;
          return console.log(`You win this round. ${playerChoice}
            beats ${computerChoice}.`);
        } else if (playerChoice === 'paper' && computerChoice === 'scissors') {
          computerScore++;
          return console.log(`You lose this round. ${computerChoice}
            beats your ${playerChoice}`);
        } else if (playerChoice === 'scissors' && computerChoice === 'paper') {
          playerScore++;
          return console.log(`You win this round. ${playerChoice}
            beats ${computerChoice}.`);
        } else if (playerChoice === 'scissors' && computerChoice === 'rock') {
          computerScore++;
          return console.log(`You lose this round ${computerChoice}
            beats your ${playerChoice}`);
        } else {
          console.log("You entered an invalid choice. Get it together.");
          alert("STUPID");
        }
      }

      function game(rounds = 5) {
        if (typeof(rounds) !== 'number' || rounds === 0) {
          return "Must give game() a number(non-zero) argument";
        } else {console.log(`Starting new game of ${rounds} rounds...`);}
        while (rounds > 0) {
          let playerChoice = prompt('Rock, paper, or scissors? ', '');
          playRound(playerChoice, computerPlay());
          if (playerChoice === storedComputerChoice) {
            alert("TIE");
            continue;
          }
          if (playerChoice === 'rock' || playerChoice === 'paper' ||
            playerChoice === 'scissors') {
              rounds--;
            } else { continue; }
          console.log(`Score: Player (${playerScore}|${computerScore}) Computer`);
          console.log(`${rounds} rounds left.`);
        }
      }
      game();
      playerScore === computerScore ? console.log("Game was a tie. How boring.")
        : console.log("Game over.");
      playerScore > computerScore ? console.log("********** You won the game! **********")
        : console.log("You lost the game :( Goodbye, loser.");
      if (playerScore === computerScore) { alert("BORING TIE. TRY WINNING NEXT TIME.") }
      playerScore > computerScore ? alert("YOU WIN OMG") : alert("EW YOU LOST");
    </script>
  </body>
</html>
